---
title: shell学习
date: 2023-07-03 15:11:41
tag:
categories:
description:
---
### 基础语法
1. 声明解释器
    `#!/bin/bash` `#!bin/php`
    > #! 是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行
2. Shell 变量
    - 命名规则类似于js(`$`符号例外)
    - 赋值时, `=`前不能有空格
    - 可以用`unset`来删除
    - 设置为 `readonly` 的变量不能删除
    - 使用时, 用`${}`来包裹 (也可以省略掉{})
3. 字符串
    - 单引号原样输出
    - 双引号里可以输出变量, 加转义字符
    - `${#string}`输出字符串string的长度
    - `${string:1:4}`截取字符串string的长度
    - `` `expr index "$string" io` `` 查找字符串i或o首次出现的位置
4. 数组
    - 只支持一维数组
    - 定义数组`数组名=(值1 值2 ... 值n)`
    - 读取数组元素 `${array_name[index]}`
    - 关联数组 `declare -A array_name` (使用任意的字符串、或者整数作为下标来访问数组元素)
    - 使用 `@` 或 `*` 可以获取数组中的所有元素
    - 在数组前加一个感叹号 ! 可以获取数组的所有键
    - 获取数组长度的方法与获取字符串长度的方法相同 `${#}`
5. 传递参数
    我们可以在执行 Shell 脚本时，向脚本传递参数，脚本内获取参数的格式为：$n。n 代表一个数字，1 为执行脚本的第一个参数，2 为执行脚本的第二个参数, 其中 $0 为执行的文件名(包含文件路径)
    |参数处理|说明|
    |--|--|
    |$#|传递到脚本的参数个数|
    |$*|以一个单字符串显示所有向脚本传递的参数。|
    |$$|脚本运行的当前进程ID号|
    |$!|后台运行的最后一个进程的ID号|
    |$@|与$*相同，但是使用时加引号，并在引号中返回每个参数。|
    |$-|显示Shell使用的当前选项，与set命令功能相同|
    |$?|显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。|
    - `$*` 与 `$@` 区别只有在双引号中体现出来。假设在脚本运行时写了三个参数 1、2、3，，则 " * " 等价于 "1 2 3"（传递了一个参数），而 "@" 等价于 "1" "2" "3"
6. 运算符  
    原生bash不支持简单的数学运算，但是可以通过其他命令来实现，例如 awk 和 expr。  
    expr 是一款表达式计算工具，使用它能完成表达式的求值操作: `` "两数之和为 : ${`expr 2 + 2`}" `` (表达式和运算符之间要有空格, 完整的表达式要被 `` `` `` 包含)。 在 MAC 中 shell 的 expr 语法是：$((表达式))
    - 算术运算符 `+` `-` `*` `/` `%` `=` `==` `!=` (乘号(*)前边必须加反斜杠, 条件表达式要放在方括号之间，并且要有空格)
    - 关系运算符 `-eq` `-ne` `-gt` `-lt` `-ge` `-le` (只支持数字，不支持字符串，除非字符串的值是数字)
    - 布尔运算符 非`!` 或`-o` 与`-a`
    - 逻辑运算符 `&&` `||`
    - 字符串运算符 相等`=` 不等`!=` 长度为0`-z` 长度不为0`-n` 不为空`$`
    - 文件测试运算符
7. echo 命令
    echo 指令与 PHP 的 echo 指令类似，都是用于字符串的输出。
8. test 命令
    test 命令用于检查某个条件是否成立，它可以进行数值、字符和文件三个方面的测试。
9. 流程控制
    - 流程控制不可为空
    - if..else `if..then .. elif..then .. else .. fi`
    - for `for .. in .. do .. done`
    - while `while .. do .. done`
    - until 与 `while` 相反 